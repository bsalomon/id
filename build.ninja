builddir = out

cc = clang -Weverything -Wno-vla -fcolor-diagnostics

rule compile
    command = $cc -Werror -O3 -march=native -fomit-frame-pointer -MD -MF $out.d $args -c $in -o $out
    depfile = $out.d
    deps    = gcc

rule link
    command = $cc $in -o $out

build out/id.o: compile id.c
    args = -I`brew --prefix || echo /usr`/include
build out/id: link out/id.o
